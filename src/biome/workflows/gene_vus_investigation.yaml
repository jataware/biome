title: Gene VUS Investigation
human_description: |
  Find details about Variants of Uncertain Significance given a gene
  symbol, transcript ID, coding change, and protein change.
agent_description: |
  This workflow investigates VUS for a given gene.
  The user must provide a transcript ID and a gene symbol. If protein changes and coding changes are not provided, ask the user to provide them -- or if they want to run the workflow just picking the first variant and transcript in the data.
category: biomedical
example_prompt: Run Gene VUS workflow for EGFR variant NM_005228.3:c.2648T>C (p.Leu883Ser)
hidden: false
is_context_default: false

stages:
  - name: Gather Gene Information
    steps:
      - prompt: Find the gene symbol, full gene name, and cytogenic band from ClinVar. Make sure to find the correct gene information using the coding change and protein change in your search, NOT just the name.
  - name: Get Transcript Information
    steps:
      - prompt: |
          Find the transcript of the given variant and get the transcript statistics. Find a transcript via the Ensembl rest API through a RefSeq ID. Once you get the Ensembl transcript, find the detailed transcript statistics.
          * Total Exons
          * Coding Exons
          * Transcript Length
          * Translation Length
      - prompt: Find the location of the variant (exon X of Y)
      - prompt: After finding this information, unset the relevant variables to keep the context lean.
  - name: Find Relevant Domains
    steps:
      - prompt: |
          Find the domains of the variant, focusing on Smart and Pfam regions. Find this via Ensemble's rest API. List the domains and sources.

          IMPORTANT: do not print a large amount of text here. Check the size of what you're printing out - this might be a lot of data. Please interpret it without printing all of it.
      - prompt: After finding this information, unset the relevant variables to keep the context lean.
  - name: Find Relevant Organs
    steps:
    - prompt: Find the organs with RNA expression from Human Protein Atlas for the given gene variant.
    - prompt: Find the organs with high protein expression from Human Protein Atlas for the given gene variant.
  - name: Find ClinVar Information
    steps:
      - prompt: |
          Record the Clinvar details of the variant:
            * Classification
            * Condition
            * All comments and more information
  - name: Format Results
    steps:
      - prompt: |
          Show a table of all of the information gathered to the user with the following rows:
          ```
          Gene Symbol
          Full Gene Name
          Cytogenic Band

          Organs with high RNA expression
          Organs with high protein expression

          Transcript statistics:
          Exons
          Coding exons
          Transcript length
          Translation length

          Domains

          Location of variant

          Classification
          Condition
          ClinVar comments and more information.
          ```
          Important: Format this last step as a markdown table rather than a to-do list and show everything recorded up to this point.

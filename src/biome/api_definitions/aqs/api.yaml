name: "EPA Air Quality System"
cache_key: api_assistant_aqs_json
description: |
    This API is the primary place to obtain row-level data 
    from the EPA's Air Quality System (AQS) database. AQS contains 
    ambient air sample data collected by state, local, tribal, and federal 
    air pollution control agencies from thousands of monitors around the nation.
    It also contains meteorological data, descriptive information about 
    each monitoring station (including its geographic location and its operator),
    and information about the quality of the samples. Note, AQS does not contain
    real-time air quality data (it can take 6 months from the time 
    data is collected until it is in AQS). For real-time data, please use
    the AirNow API.
raw_documentation: !load documentation/aqs.json
examples: !load documentation/examples.md
cache_body: 
    default: true 
documentation: |
    # OpenAPI Spec JSON:
    {raw_documentation}

    # Additional Instructions:
    
    This API is through OpenAPI Spec (Swagger). You will be provided the schema. 
    All requests go to the following URL: https://aqs.epa.gov/data/api
    That is the base URL for all requests. 

    To use the AQS API always retrieve the email/key credentials from environment variables:
    - Email: os.environ.get("API_EPA_AQS_EMAIL")
    - API Key: os.environ.get("API_EPA_AQS")
    Do not use placeholder auth values from the OpenAPI spec nor prompt the user for these values, just use the environment variables.
    
    Daily/yearly data can only be accessed one year at a time. If working for that in year/decade ranges, prefer to use the annualData endpoints, as the daily data may be too large to fit into context.
    If the user requests data for a year range, you will need to make multiple requests to the API- potentially sampling in between, or creating averages, in order to not make requests for every single year in the range.
    The earliest sample in the data set is from 1957. Year 1980 marks the beginning of nationally consistent operational and quality assurance procedures.

    Ensure you know the fields that come back from the OpenAPI spec in order to process the AQS data.

    Measured entities in the AQS data set are referred to as parameters (which includes pollutants/substances), and use integer codes specific to AQS.

    If a monitor is scheduled to collect data and does not it will contain `null` data. This is a placeholder to let EPA know that more data will not be forthcoming.    AQS does place absolute limits on the values that can be submitted.
    However, these are fairly liberal limits- for many parameters, negative values are acceptable.
    AQS has a nominal quarterly reporting deadline: data must be reported by 90 days after the end of the calendar quarter in which they are collected.

    If you need to inspect the data of a JSON response before processing, and you're dealing with annual data, or multi-daily data, or
    for a geographic region that could yield too much data to process (or fit into an LLM context window), 

    better use this endpoint:
    ```
    /metaData/fieldsByService?email={email}&key={key}&service=annualData
    ```
    (example above is checking shape of annualData endpoint). It will provide fields documentation for each property in the response.
    If you use `print(response_data)` on a huge JSON response, you will not be able to proceed- you can also try checking the length as string,
    and if that's too long, inspect whatever amount of characters that would be enough.
    That is, never do:
    ```
    data = response.json()
    print(data)
    ```
    instead, either use fieldsByService endpoint as described earlier, or use the Example 3 below (in the #Examples section) to generate a schema and inspect the data.

    Also, parameter_name is not a property, usually, check `parameter` or `parameter_code` in responses.

    Here are some examples of how to use the API, if applicable:
    {examples}
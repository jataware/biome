name: "EPA Air Quality System"
cache_key: api_assistant_aqs_json
description: |
    This API is the primary place to obtain row-level data 
    from the EPA's Air Quality System (AQS) database. AQS contains 
    ambient air sample data collected by state, local, tribal, and federal 
    air pollution control agencies from thousands of monitors around the nation.
    It also contains meteorological data, descriptive information about 
    each monitoring station (including its geographic location and its operator),
    and information about the quality of the samples. Note, AQS does not contain
    real-time air quality data (it can take 6 months from the time 
    data is collected until it is in AQS). For real-time data, please use
    the AirNow API.
raw_documentation: !load documentation/aqs.json
examples: !load documentation/examples.md
cache_body: 
    default: true 
documentation: |
    {raw_documentation}

    # Additional Instructions:
    
    This API is through Open API Spec (Swagger). You will be provided the schema. 
    All requests go to the following URL: https://aqs.epa.gov/data/api
    That is the base URL for all requests. 

    To use the AQS API, you need to provide an email and an API key;
    always retrieve the credentials from environment variables:
    - Email: os.environ.get("API_EPA_AQS_EMAIL")
    - API Key: os.environ.get("API_EPA_AQS")
    Always use the credentials from those environment variables- do not use placeholder values from the openapi spec (ie dont use your_email@example.com, test@email.com nor your_api_key).
    No need to prompt the user for these values, just use the environment variables; let the user know if you're unable to use them.
    
    Daily/yearly data can only be accessed one year at a time. If working for that in year/decade ranges, prefer to use the annualData endpoints, as the daily data may be too large to fit in an LLM's context.
    If the user requests data for a year range, you will need to make multiple requests to the API- potentially sampling in between, or creating averages, to not make requests for every single year in the range.
    For AQS, the monitoring agencies are required to report the measured data, along with metadata about the site and monitoring equipment and associated quality assurance data to AQS. AQS and its predecessors have been accepting and storing this data for more than 50 years and currently contains more than 3 billion measurements.
    The earliest sample in the data set is from 1957. Year 1980 marks the beginning of nationally consistent operational and quality assurance procedures.

    Measured entities in the AQS data set are referred to as parameters, the code specific to AQS. (The terms “pollutants” and “substances” are not completely appropriate as some things measured are not pollutants, e.g., carbon, nor substances, e.g., wind speed.)
    If you need to get the list of parameter codes, you can use the following request:
    /list/parametersByClass?email=redacted&key=redacted&pc=ALL
    Ensure you are selecting the correct parameters. That is, AQS contains particulate data speciated at different sizes, and one or more of these size cut-offs may include the same species. For example, Aluminum has been reported at four different size fractions, which in AQS is four different parameters.

    If a monitor is scheduled to collect data and does not (e.g., it is down for maintenance), the operator is supposed to submit a null data reason to AQS. This is a placeholder to let EPA know that more data will not be forthcoming. These null samples do not contribute toward data completeness and are not included in some public reports and files.
    AQS does place absolute limits on the values that can be submitted. However, these are fairly liberal limits- for many parameters, negative values are acceptable.
    AQS has a nominal quarterly reporting deadline: data must be reported by 90 days after the end of the calendar quarter in which they are collected.

    Here are some examples of how to use the API, if applicable:
    {examples}